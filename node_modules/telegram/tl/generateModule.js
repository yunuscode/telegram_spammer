"use strict";
const fs = require("fs");
const path = require("path");
require("./types-generator/generate");
function main() {
    const apiTl = fs.readFileSync(path.resolve(__dirname, `./static/api.tl`), "utf-8");
    fs.writeFileSync(path.resolve(__dirname, "./apiTl.js"), `module.exports = \`${stripTl(apiTl)}\`;`);
    const schemaTl = fs.readFileSync(path.resolve(__dirname, `./static/schema.tl`), "utf-8");
    fs.writeFileSync(path.resolve(__dirname, "./schemaTl.js"), `module.exports = \`${stripTl(schemaTl)}\`;`);
}
function stripTl(tl) {
    return tl
        .replace(/\/\*[\s\S]*?\*\/|\/\/.*/g, "")
        .replace(/\n\s*\n/g, "\n")
        .replace(/`/g, "\\`");
}
main();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVNb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9ncmFtanMvdGwvZ2VuZXJhdGVNb2R1bGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFFN0IsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFFdEMsU0FBUyxJQUFJO0lBQ1QsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsaUJBQWlCLENBQUMsRUFDMUMsT0FBTyxDQUNWLENBQUM7SUFDRixFQUFFLENBQUMsYUFBYSxDQUNaLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxFQUNyQyxzQkFBc0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQzVDLENBQUM7SUFFRixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUM1QixJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxvQkFBb0IsQ0FBQyxFQUM3QyxPQUFPLENBQ1YsQ0FBQztJQUNGLEVBQUUsQ0FBQyxhQUFhLENBQ1osSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsZUFBZSxDQUFDLEVBQ3hDLHNCQUFzQixPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FDL0MsQ0FBQztBQUNOLENBQUM7QUFFRCxTQUFTLE9BQU8sQ0FBQyxFQUFFO0lBQ2YsT0FBTyxFQUFFO1NBQ0osT0FBTyxDQUFDLDBCQUEwQixFQUFFLEVBQUUsQ0FBQztTQUN2QyxPQUFPLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQztTQUN6QixPQUFPLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzlCLENBQUM7QUFFRCxJQUFJLEVBQUUsQ0FBQyJ9